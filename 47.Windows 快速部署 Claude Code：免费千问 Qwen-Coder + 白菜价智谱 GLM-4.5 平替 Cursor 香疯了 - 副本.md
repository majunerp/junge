

众所周知，国内用户想要使用 `claude code` 非常麻烦，直接使用会提示：claude code 在当前国家不可用！

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817103318037.png)

其实我们国内大模型厂商的编码能力也跟上来了，效果非常不错，尤其是千问的 `qwen-coder` ，我已经使用过一段时间了，效果非常不错，今天，我将带领大家通过新的方式使用上 `Claude Code` ，

# 一、安装nodejs环境

官方下载地址：https://nodejs.org/zh-cn/download

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817192648025.png)

# 二、安装Claude-code

```
npm install -g @anthropic-ai/claude-code
```



# 三、安装Claude-code-router

工作原理：

https://github.com/musistudio/claude-code-router/blob/main/blog/zh/%E9%A1%B9%E7%9B%AE%E5%88%9D%E8%A1%B7%E5%8F%8A%E5%8E%9F%E7%90%86.md



## 一）安装

github地址：https://github.com/musistudio/claude-code-router

```
npm install -g @musistudio/claude-code-router
```

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817103607088.png)



## 二）来到当前win登录账户的home目录

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816125650728.png)



## 三）创建配置文件夹

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816125625674.png)



## 四）创建json配置文件

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816125941734.png)



## 五）粘贴一下配置信息

```json
{
  "Providers": [
    {
      "name": "modelscope",
      "api_base_url": "https://api-inference.modelscope.cn/v1/chat/completions",
      "api_key": "ms-731640c9-fe38-4e86-9ad7-edff154c192d",
      "models": ["Qwen/Qwen3-Coder-480B-A35B-Instruct", "Qwen/Qwen3-235B-A22B-Thinking-2507"],
      "transformer": {
        "use": [
          [
            "maxtoken",
            {
              "max_tokens": 65536
            }
          ],
          "enhancetool"
        ],
        "Qwen/Qwen3-235B-A22B-Thinking-2507": {
          "use": ["reasoning"]
        }
      }
    },
  ],
  "Router": {
    "default": "modelscope,Qwen/Qwen3-Coder-480B-A35B-Instruct",
  }
}
```



下一步，我们到魔搭社区注册一个账号，获取自己的API KEY，就可以使用了



# 四、获取魔搭社区API KEY

## 一）注册魔搭社区账号

魔搭社区地址：https://www.modelscope.cn/

## 二）绑定自己的阿里云账号

点击右上角的头像，绑定自己的阿里云账号

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816133827827.png)

## 三）创建访问令牌

进入访问令牌页面：https://www.modelscope.cn/my/myaccesstoken

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816144024045.png)



# 五、启动claude-code-router

找一个空文件夹，`右键` 打开命令行：

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816153516590.png)

通过启动`claude-code-router`来启动claude code

```
ccr code
```

启动后，选择主题：

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816153005175.png)



会看到 `claude code`  的提示

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816153347139.png)



选择 `Yes`:

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816153553248.png)



登录成功，测试一下：

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250816154655996.png)

# 六、启动 claude code可能遇到的问题

## 一）Service not running, starting service...

遇到这个问题，有些时候，多等会，他会自动启动，如果还是不成功，我们可以先执行 `ccr start` ，然后再执行 `ccr code` 

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817104334422.png)

## 二）如果端口被占用

`Claude code` 默认使用 `3456` 端口：

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817110728940.png)

如果正好和你本地其他服务端口冲突冲突，可以通过修改配置文件来修改端口：

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817111201717.png)



重新启动看下效果，端口修改过来了：

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817111450682.png)



# 七、配置其他大模型API

## 一）智谱GLM 4.5

地址：https://bigmodel.cn/

注册一个账户，进入个人中心页面，或者直达下面地址，来创建自己的 `api key`：

https://bigmodel.cn/usercenter/proj-mgmt/apikeys

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817112837613.png)



配置文件：

```json
{
  "Providers": [
    {
      "name": "openrouter",
      "api_base_url": "https://open.bigmodel.cn/api/paas/v4/chat/completions",
      "api_key": "a2c05b1bd7af4a3792fe4c20fdc9edb2.zz8Jn9GTqkigUGP5",
      "models": ["glm-4.5"],
      "transformer": {
        "use": ["openrouter"]
      }
    },
  ],
  "Router": {
    "default": "openrouter,glm-4.5",
  }
}
```



## 二）Kimi K2

1、注册一个账号

地址：https://platform.moonshot.cn

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817194006119.png)



2、创建API KEY

进入API KEY管理页面：https://platform.moonshot.cn/console/api-keys

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817194340253.png)



3、配置信息

```
{
  "Providers": [
    {
      "name": "openrouter",
      "api_base_url": "https://api.moonshot.cn/v1/chat/completions",
      "api_key": "sk-oN99OncZaTeRW1yDfi70t3CJnXhuRkUuTqWRJATVgKPDKj6T",
      "models": ["kimi-k2-0711-preview"],
      "transformer": {
        "use": ["openrouter"]
      }
    },
  ],
  "Router": {
    "default": "openrouter,kimi-k2-0711-preview",
  }
}
```





# 八、Claude Code 常用命令

## 一）/init

`/init` 命令会通读整个项目，然后总结整个项目的技术栈，模块等核心信息，并将其写入到 `Claude.md` 文件内，这样以后每次执行命令，他都会先来读一下文件内容，快速了解剋整个项目



## 二）/compact

/compact` 这个命令用来压缩之前的聊天上下文记录，这样token消耗很大，我们可以用这个命令压缩上下文，减轻上下文压力而不影响聊天质量。



## 三） /clear

`/clear` 命令用来清除之前聊天上下文信息，开启新的聊天，这样新的聊天不受之前的聊天内容的影响



## 四）模式切换

`alt+m` 可以切换三种任务模式：

- 默认模式下，代码的任何改动都需要经过你手动确认

- `accept edits` 模式下，任何操作不再需要人工审核
- `plan mode` 模式下，claude code 只会提出自己的想法和意见，或者修改代码的计划，但是不会对代码进行任何修改



## 五）切换大模型

在`config.json` 里配置好模型 `Provider` 后，需要重启一下`Claude-code-router` ，然后，通过 `/model Provider名称 大模型名称` 来切换模型：

```
/model modelscope,Qwen/Qwen3-Coder-480B-A35B-Instruct
```



# 九、如何在IDE里使用Claude Code

`Claude code` 是命令行工具，有些朋友估计不是很习惯，那么如何在IDE里使用 `Claude Code` 呢？

## 一）搜索“Claude Code for VSCode”

1、在Vscode的插件市场搜索“Claude Code for VSCode”并点击 `install` 进行安装

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817190346962.png)

> 注意：
>
> 在上面**第五步**，我们启动claude-code-router时，是在 `test5` 文件夹下打开的命令行，这里 `vscode` 也需要打开相同的文件夹

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817191907019.png)



## 二）回到Claude Code 命令行界面

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817192418150.png)





## 三）测试一下

```
用html+js+css，给我写一个个人介绍页面：姓名：阿坡，坐标：北京，介绍：叶动AI联合创始人，RPA&大模型应用开发双赛道教练，WEB全栈开，发工程师 公众号：阿坡RPA，个人微信：ao-ai-coding，知识星球：阿坡RPA实战笔记
```

写完页面后，我们使用 `ALT+M` 把模式改为普通模式，这样代码改动需要经过我确认，我给他下达一个修改任务：把头像改为一个笑脸

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817195122763.png)



Claude Code 就会在`vscode`里面把改动以文件形式显示出来，让我手动确认它的改动

![](https://wamplempic.oss-cn-beijing.aliyuncs.com/mdimage-20250817194955722.png)

